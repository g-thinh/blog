---
title: Adding a Dark Theme with Stitches
publishedDate: Sun Mar 6 2022 10:30:00
imageUrl: https://images.unsplash.com/photo-1618005198919-d3d4b5a92ead?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1548&q=80
imageAltText: Image provided by Unsplash, taken by Milad Fakurian
description: A tutorial on how to add a Dark mode with Stitches and Next.js
tags: [Stitches, Next.js]
---

One of the first things I wanted to do in this blog was to add a dark mode, and
[Stitches](https://stitches.dev/), a CSS-in-JS library that provides awesome DX 
and support for SSR, felt like the perfect choice for me to tackle this task!

> If you are unfamiliar with integrating Stitches with a Next.js project, I highly
> recommend giving [this article](https://stitches.dev/blog/using-nextjs-with-stitches)
> a read before continuing.

## Defining the Dark Theme inside stitches.config

Stitches provides a function called `createTheme` that allows us to provide 
custom theme tokens specific to a new theme, once we define a default theme,
we can use that function to create a dark theme.

```ts
// stitches.config.ts
import { createStitches } from "@stitches/react";

export const { styled, getCssText, createTheme, globalCss } = createStitches({
  theme: {
    /* ...other tokens */  
    colors: {
      text: "black",
      background: "white",
    },
  }
})

export const darkTheme = createTheme({
  colors: {
    text: "white",
    background: "black",
  }
})
```

We can then use these tokens at the global scope of our CSS, which can be
done with the `globalCss` function we deconstructed earlier. In the same
config, we can add:

```ts
// stitches.config.ts
const GlobalStyles = globalCss({
  body: {
    background: "$background",
    color: "$text",
  },
})
//You can declare the styles here or in pages/_app.tsx
GlobalStyles();
```

And just like that you are now able to declare global styles using 
the custom theme tokens from Stitches. Next, we want to toggle between
the two themes.

## Creating a Theme Toggle

This step requires an additional package that was built to work with
Stitches called [next-themes](https://github.com/pacocoursey/next-themes).
This is necessary because in order to change theme, Stitches would need some
kind of provider similar to `styled-components` to override the theme-specific
tokens, such as colors in this case.

After installing `next-themes`, we can add the theme provider into our Next.js
application.

```tsx
// pages/_app.tsx
import type { AppProps } from "next/app";
import { ThemeProvider } from "next-themes";
import { darkTheme } from "../stitches.config";

export default function MyApp({ Component, pageProps }: AppProps) {
  return (
    <ThemeProvider
      attribute="class"
      defaultTheme="system"
      value={{
        light: "light",
        dark: darkTheme.className
      }}
    >
      <Component {...pageProps} />
    </ThemeProvider>
  );
}
```

And now we can create a toggle to switch between the themes using the `useTheme`
hook that `next-themes` provides. 

```tsx
// pages/index.tsx
import { styled } from "../stitches.config";
import { useTheme } from "next-themes";

const Button = styled("button", {});

export default function IndexPage() {
  const { theme, setTheme } = useTheme();
  const toggleTheme = () =>
    setTheme(theme === "light" ? "dark" : "light");

  return (
    <div>
      <h1>The current theme is {theme === "dark" ? "dark" : "light"}</h1>
      <Button onClick={toggleTheme}>Change Theme</Button>
    </div>
  );
}
```

And that's pretty much it! We now have a dark mode enabled with Stitches.

## Additional Notes

Theming with Stitches, especially with a dark theme, requires a bit of forethought
into the selection of color tokens. Luckily, the wonderful folks over at Modulz also
provide a variety of color palettes through their 
[Radix-UI/colors](https://www.radix-ui.com/colors) package.

If Stitches suits your needs for dark theming, then feel free to checkout the 
[Codesandbox](https://codesandbox.io/s/stitches-dark-mode-zrbqqg) made for this
tutorial.